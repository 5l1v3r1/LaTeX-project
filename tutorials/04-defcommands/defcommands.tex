% Clever thing to minimize the files I need to edit to change how the files are
% looking. The following one line comment is to trick VIM-LaTeX
\documentclass{scrartcl}
\input{./../template_preamble.tex}

% Custom packages
\newcommand{\hho}{\ensuremath{\mathrm{H_2O}}}
\newcommand{\un}[1]{\unit{#1}}

\newcounter{chemcmp}
\newcounter{chemcmpp}
\renewcommand{\thechemcmp}{\arabic{chemcmp}}
\renewcommand{\thechemcmpp}{\alph{chemcmpp}}
\newcommand{\cmpinc}{
    \refstepcounter{chemcmp}
    \setcounter{chemcmpp}{0}
}
\newcommand{\cmp}[1]{
    \cmpinc
    \textbf{\thechemcmp }
    \label{#1}
}
\newcommand{\cmppe}[1]{
    \refstepcounter{chemcmpp}
    \textbf{\thechemcmp\thechemcmpp }
    \label{#1}
}
\newcommand{\cmppn}[1]{
    \cmpinc
    \refstepcounter{chemcmpp}
    \textbf{\thechemcmp\thechemcmpp }
    \label{#1}
}

\usepackage{graphicx}
\graphicspath{{./figs/}}
\usepackage[update,verbose=false]{epstopdf}
\usepackage{tikz}
\newlength{\tikzunit}

\title{Defining your own macros, commands and environments}
\author{Ignas Anikevicius}

\begin{document}

\maketitle

\begin{abstract}
    This is one of the most useful \TeX\ features. Actually all \LaTeX\ system
    is just a set of macros and environments to extend \TeX\ features.
    Definition of your own commands might look a very difficult thing to do, but
    actually it is not! I will examine some examples in the following sections
\end{abstract}

\tableofcontents

\section{Defining new \LaTeX\ commands}

For example, we want to have a command named \verb|titleoftheproject| and we
want it to return the title of our current project, w

Let's now consider a situation where a person is writing a dissertation on the
physical properties of water and he uses its chemical formula $\left( \hho
\right)$ a lot. It takes time to typeset such a formula, and the code actually
looks like this: \verb|$\mathrm{H_2O}$|. However, if we have
something similar to the following code in the preamble, we could just write
\verb|\hho|.
\begin{lstlisting}
\newcommand{\hho}{\ensuremath{\mathrm{H_2O}}}
\end{lstlisting}

The best place to get all the necessary knowledge for being able to do the same
as was done above would be 
\href{https://secure.wikimedia.org/wikibooks/en/wiki/LaTeX/Customizing_LaTeX#New_commands}{this
page}. There you will be able to find simpler examples and much more examples.

Here I will just give you some useful code snippets, which might give you some
ideas or turn out to be useful.

\subsection{Typesetting units correctly}

Well typeset document will usually have very elegant code. Which means, that for
example to enter an equation one will not switch back and forth from the
\verb|math| mode, but rather enter everything there. However, if units are
typeset right away, they might appear in italics (ie. the same way as the
equation variables appear), which is not what we want.

There are several packages which might be worth looking, but I find it just
unnecessary as one can solve this issue with only one short command.

Let's consider a following expression:
\input{units-without.tex}
and the code for it can be found bellow:
\lstinputlisting{units-without.tex}

Now look at the equation generated by another version of the code where we do
not enter all those tedious commands:
\input{units.tex}
\lstinputlisting{units.tex}

This can be achieved with the following command in the preamble of the file.
\begin{lstlisting}
\newcommand{\un}[1]{\ensuremath{\, \mathrm{#1}}}
\end{lstlisting}

You might wonder, why to use a newly defined command, if the amount of code
does not decrease very much. However, you \textbf{should} think about the case
where you would like to change the formatting of the units just ever so slightly
and if you used the \verb|\un| command, which you had defined previously, you
would need to change only one line, but otherwise you would need to change the
entire document, which I believe is not the fastest way to do it.

\subsection{Typesetting lengthy and tedious expressions quickly}

This probably might apply more to people who are dealing with uncertainties more
and need to write expressions which are quite repetitive in a sense. Here is an
example with relative fractions.

Suppose we have the following the equations:
\input{relfrac-head.tex}

Please notice, that the relative errors do have very repetitive expressions,
as we always have a fraction and the symbol is repeated twice in the numerator
and denumerator, just on the numerator there is an extra $\Delta$ symbol in
front.

Now let's compare two possible ways to achieve the above line for the fractional
errors:
\lstinputlisting{relfrac-without.tex}
\lstinputlisting{relfrac.tex}

I guess you can see how much more readable the second variant is. And it is
achieved by defining the \verb|\rel| command in the preamble:
\begin{lstlisting}
\newcommand{\rel}[1]{\ensuremath{\cfrac{\Delta #1}{#1}}}
\end{lstlisting}


\section{Counters and more elaborate commands}

Since we now how to define new commands in \LaTeX{} and ease our life in this
way, we can now go one step further. Suppose we have a large document with a lot
of figures and in those figures we have a lot of structures, which we would like
to number and refer easily in the text. 

\subsection{Example}

\input{compnum.tex}
\lstinputlisting{compnum.tex}

The \verb|\cmp| command definition is as follows:
\begin{lstlisting}
\newcounter{chemcmp}
\renewcommand{\thechemcmp}{\arabic{chemcmp} }
\newcommand{\cmp}[1]{\refstepcounter{chemcmp}
    \textbf{\thechemcmp}
    \label{#1}}
\end{lstlisting}

\subsection{Example 2}

Now we can extend the idea of numbering the compounds and including numbers like
1a, 1b. I will use the same for structures, just I will change the numbers.

\input{fig.tex}
\lstinputlisting{fig.tex}

The \verb|\cmp| name stands for the 'compound'
whereas \verb|\cmppn| is for 'subcompound new' and \verb|\cmppe| is for
'subcompound existing'. The reason why I have made 2 commands for 'subcompounds'
is that one is for the entry of the first 'subcompound' (e.g. 1a) and the other
compound is for adding 'subcompounds' (e.g. 1b, 1c, 1d\ldots).
The code in the preamble defining the commands \verb|\cmp|, \verb|\cmppn|,
\verb|\cmppe| is as follows:
\begin{lstlisting}
\newcounter{chemcmp}
\newcounter{chemcmpp}
\renewcommand{\thechemcmp}{\arabic{chemcmp}}
\renewcommand{\thechemcmpp}{\alph{chemcmpp}}
\newcommand{\cmpinc}{
    \refstepcounter{chemcmp}
    \setcounter{chemcmpp}{0}
}
\newcommand{\cmp}[1]{
    \cmpinc
    \textbf{\thechemcmp }
    \label{#1}
}
\newcommand{\cmppe}[1]{
    \refstepcounter{chemcmpp}
    \textbf{\thechemcmp\thechemcmpp }
    \label{#1}
}
\newcommand{\cmppn}[1]{
    \cmpinc
    \refstepcounter{chemcmpp}
    \textbf{\thechemcmp\thechemcmpp }
    \label{#1}
}
\end{lstlisting}

\end{document}

% Editor configuration:
% vim: tw=80:spell:spelllang=en_gb


